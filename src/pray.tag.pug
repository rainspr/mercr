pray
  section
    h3 お祈り計算できるマン3.1
      small (更新:{ document.lastModified })
    jst 
    .row
      //マッチングのボタン群
      .col-md-4
        h4(strong, #clock)
        .row
          .col-xs-6
            .alert.alert-warning(type="button", data-toggle="modal", data-target="#upleft", tabindex="0")
              p.text-left 左上 ({ min.modul })
              p.text-left: strong { pray.modul }
          .col-xs-6
            .alert.alert-danger(type="button", data-toggle="modal", data-target="#upright", tabindex="0")
              p.text-left 右上 ({ min.modur })
              p.text-left: strong { pray.modur }
        .row
          .col-xs-6.col-xs-offset-3
            .alert.alert-default(type="button", data-toggle="modal", data-target="#gate", tabindex="0")
              p.text-left ゲート ({ min.modgt })
              p.text-left: strong { pray.modgt }
        .row
          .col-xs-6
            .alert.alert-info(type="button", data-toggle="modal", data-target="#lowleft", tabindex="0")
              p.text-left 左下 ({ min.modll })
              p.text-left: strong { pray.modll }
          .col-xs-6
            .alert.alert-success(type="button", data-toggle="modal", data-target="#lowright", tabindex="0")
              p.text-left 右下 ({ min.modlr })
              p.text-left: strong { pray.modlr }
      //ゲート情報
      .col-md-8
        .panel.panel-default
          .panel-heading
            h4.panel-title ゲート情報
          .panel-body
            .table-responsive
              table.table
                thead: tr
                  th 名前
                  th リーチ
                  th 範囲
                  th 段数
                  th 外皮
                tbody: tr(each="{ selected }")
                  th { name }
                  th { reach }
                  th { range }
                  th { cmb }
                  th { skin }
    //モーダル置き場
    praymodal(ref="modul", refname="modul", modid="upleft", modtitle="左上",  modcolor="panel-warning")
    praymodal(ref="modur", refname="modur", modid="upright", modtitle="右上", modcolor="panel-danger")
    gatemodal(ref="modgt", refname="modgt", modid="gate", modtitle="ゲート", modcolor="panel-default")
    praymodal(ref="modll", refname="modll", modid="lowleft", modtitle="左下", modcolor="panel-info")
    praymodal(ref="modlr", refname="modlr", modid="lowright", modtitle="右下", modcolor="panel-success")
      
  script.
    var self = this
    self.pray = {
      modul: "タップしてね",
      modur: "タップしてね",
      modgt: "タップしてね",
      modll: "タップしてね",
      modlr: "タップしてね",
    }
    self.min = {
      modul: "-分",
      modur: "-分",
      modgt: "-分",
      modll: "-分",
      modlr: "-分",
    }
    self.selected = []
    obs.on('onclock', function(clockmin){
      self.clockmin = clockmin
    })
    obs.on('oncalc', function(refname, prayed){
      self.pray[refname] = prayed
      self.min[refname] = self.clockmin
      self.update()
    })
    obs.on('onselect', function(selected){
      self.selected = selected
      self.update()
    })
    self.on('mount', function(){
      $(function(){
        $("#upleft").on('shown.bs.modal', function(){
          $("#upright .close").focus()
        })
        $("#upright").on('shown.bs.modal', function(){
          $("#upleft .close").focus()
        })
        $("#gate").on('shown.bs.modal', function(){
          $("#gate .close").focus()
        })
        $("#lowleft").on('shown.bs.modal', function(){
          $("#lowleft .close").focus()
        })
        $("#lowright").on('shown.bs.modal', function(){
          $("#lowright .close").focus()
        })
      })
    })

    
  style.
    .alert-default {
      background-color: #f3f3f3;
      border-color: #f0f0f0;
    }
